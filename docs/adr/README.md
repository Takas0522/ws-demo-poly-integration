# アーキテクチャ決定記録（ADR）

このディレクトリには、このプロジェクトで行われた重要なアーキテクチャ決定を文書化したアーキテクチャ決定記録（ADR）が含まれています。

## ADRとは？

アーキテクチャ決定記録（ADR）は、そのコンテキストと結果とともに行われた重要なアーキテクチャ決定を記録するドキュメントです。

## ADRの形式

各ADRは以下の構造に従います：

```markdown
# [番号]. [タイトル]

日付: YYYY-MM-DD
ステータス: [提案 | 承認 | 非推奨 | 置き換え]
決定者: [関係者のリスト]

## コンテキスト

この決定または変更を動機付ける問題は何ですか？

## 決定

私たちが提案および/または実行している変更は何ですか？

## 結果

この変更によって何が簡単または困難になりますか？

### ポジティブな結果
- [ポジティブな結果1]
- [ポジティブな結果2]

### ネガティブな結果
- [ネガティブな結果1]
- [ネガティブな結果2]

## 検討した代替案

他にどのような選択肢が検討され、なぜ却下されたのですか？

## 参考資料

- [関連リソースへのリンク]
```

## ADRインデックス

| # | タイトル | ステータス | 日付 |
|---|---------|-----------|------|
| [001](./001-polyrepo-architecture.md) | Gitサブモジュールを使用したPolyrepoアーキテクチャの採用 | 承認 | 2026-01-07 |
| [002](./002-trunk-based-development.md) | トランクベース開発ワークフローの採用 | 承認 | 2026-01-07 |
| [003](./003-cosmosdb-multi-tenancy.md) | テナントパーティショニング付きCosmosDBの使用 | 承認 | 2026-01-07 |
| [004](./004-jwt-authentication.md) | 認証にJWTを使用 | 承認 | 2026-01-07 |
| [005](./005-dot-notation-permissions.md) | ドット記法権限システムの使用 | 承認 | 2026-01-07 |

## 新しいADRの作成

1. [template.md](./template.md)からテンプレートをコピー
2. 連番で番号付け（次の利用可能な番号）
3. コンテキストと理由を含めてすべてのセクションを記入
4. プルリクエストの一部として提出
5. 上記のインデックステーブルを更新

## ADRライフサイクル

### 提案
議論中の初期草案。まだ実装されていません。

### 承認
決定が下され、実装中または実装済みです。

### 非推奨
決定はもはや関連性がありませんが、歴史的コンテキストのために保持されます。

### 置き換え
決定は新しいADRに置き換えられました。置き換えるADRへのリンク。

## ベストプラクティス

1. **ADRを書くとき**：
   - 重要なアーキテクチャ決定を行うとき
   - 複数の実行可能な選択肢から選ぶとき
   - 新しい技術またはパターンを採用するとき
   - 既存のアーキテクチャアプローチを変更するとき

2. **ADRを書かないとき**：
   - 些細な決定
   - 簡単に元に戻せる決定
   - アーキテクチャに影響を与えない実装の詳細

3. **ADRを保つ**：
   - 簡潔だが完全
   - 「どのように」ではなく「なぜ」に焦点を当てる
   - 承認されたら不変（変更が必要な場合は新しいADRを作成）
   - 将来のチームメンバーが理解しやすい

4. **含める**：
   - 決定に至ったコンテキスト
   - 検討された代替案
   - トレードオフと結果
   - 関連リソースへの参照

## 参考資料

- [Michael NygardのADR記事](https://cognitect.com/blog/2011/11/15/documenting-architecture-decisions)
- [ADR GitHub組織](https://adr.github.io/)
- [Markdown Architectural Decision Records](https://adr.github.io/madr/)

---

**最終更新**: 2026-01-07

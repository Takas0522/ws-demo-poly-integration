# タスク05-06, 08, 10-16: 残りのタスク概要

このドキュメントでは、詳細実装を省略した残りのタスクの概要を記載します。

---

## タスク05: テナント管理サービス実装

### 概要
テナントのCRUD操作、テナント所属ユーザー管理を実装します。

### 主要実装項目
- テナントリポジトリ
- テナントサービス
- APIエンドポイント（GET, POST, PUT, DELETE /api/v1/tenants）
- 特権テナント保護ロジック

### 完了条件
- テナント一覧取得API動作
- テナント作成・更新・削除API動作
- 特権テナントは編集・削除不可

### 参照
- [API仕様](../../arch/api/api-specification.md) - セクション3
- [コンポーネント設計](../../arch/components/README.md) - セクション3

---

## タスク06: 利用サービス設定サービス実装

### 概要
テナントへのサービス割り当て機能を実装します。

### 主要実装項目
- サービスリポジトリ
- サービス設定サービス
- APIエンドポイント（GET /api/v1/services, POST/DELETE /api/v1/tenants/{id}/services）

### 完了条件
- サービス一覧取得API動作
- テナントへのサービス割り当て・解除API動作

### 参照
- [API仕様](../../arch/api/api-specification.md) - セクション4

---

## タスク08: フロントエンド共通コンポーネント

### 概要
再利用可能なUIコンポーネントとレイアウトを実装します。

### 主要実装項目
- **UIコンポーネント**:
  - Button, Input, Select, Alert, Modal, Table
- **レイアウトコンポーネント**:
  - MainLayout (Sidebar, Header含む)
  - PageHeader, Card

### ディレクトリ構造
```
src/front/components/
├── ui/
│   ├── Button.tsx
│   ├── Input.tsx
│   ├── Select.tsx
│   ├── Alert.tsx
│   ├── Modal.tsx
│   └── Table.tsx
└── layouts/
    ├── MainLayout.tsx
    ├── Sidebar.tsx
    └── Header.tsx
```

### 完了条件
- すべてのUIコンポーネントが実装されている
- Storybookまたは簡単なデモページで確認できる
- MainLayoutが実装され、ダッシュボードで使用できる

---

## タスク10: テナント管理画面実装

### 概要
テナントの一覧、詳細、作成、編集画面を実装します。

### 主要実装項目
- **画面**:
  - `/tenants` - テナント一覧
  - `/tenants/new` - テナント作成
  - `/tenants/[id]` - テナント詳細・編集
- **コンポーネント**:
  - TenantList, TenantForm, TenantDetail

### 完了条件
- テナント一覧が表示される
- テナント作成フォームが動作する
- テナント詳細・編集画面が動作する
- 特権テナントは編集不可の制約が適用される

---

## タスク11: ユーザー管理画面実装

### 概要
ユーザーの一覧、詳細、作成、編集画面を実装します。

### 主要実装項目
- **画面**:
  - `/users` - ユーザー一覧
  - `/users/new` - ユーザー作成
  - `/users/[id]` - ユーザー詳細・編集
- **コンポーネント**:
  - UserList, UserForm, UserDetail, RoleSelector

### 完了条件
- ユーザー一覧が表示される
- ユーザー作成フォームが動作する
- ロール割り当てが動作する

---

## タスク12: サービス設定画面実装

### 概要
テナントへのサービス割り当て画面を実装します。

### 主要実装項目
- **画面**:
  - `/services` - サービス一覧
  - `/tenants/[id]/services` - テナントサービス設定
- **コンポーネント**:
  - ServiceList, ServiceAssignment

### 完了条件
- サービス一覧が表示される
- テナントへのサービス割り当て・解除が動作する

---

## タスク13: モックサービス実装

### 概要
4つのモックサービス（ファイル管理、メッセージング、API利用、バックアップ）のAPIをBFF内に実装します。

### 主要実装項目
- **APIエンドポイント**:
  - GET `/api/mock/file-management/files`
  - GET `/api/mock/messaging/messages`
  - GET `/api/mock/api-usage/status`
  - GET `/api/mock/backup/backups`
  - POST `/api/mock/backup/execute`

### モックデータ例
```typescript
// ファイル管理
{
  files: [
    { id: 'file-1', name: 'document.pdf', size: 1024000, ... }
  ]
}

// メッセージング
{
  messages: [
    { id: 'msg-1', subject: 'System Update', body: '...', ... }
  ]
}
```

### 完了条件
- すべてのモックAPIが実装されている
- APIを呼び出すと適切なモックデータが返却される

### 参照
- [API仕様](../../arch/api/api-specification.md) - セクション6

---

## タスク14: CI/CD パイプライン構築

### 概要
GitHub Actions を使用して、Azure へのデプロイを自動化します。

### 主要実装項目
- **ワークフロー**:
  - `.github/workflows/deploy-frontend.yml`
  - `.github/workflows/deploy-auth-service.yml`
  - `.github/workflows/deploy-tenant-service.yml`
  - `.github/workflows/deploy-service-setting.yml`

### ワークフロー内容
1. コードチェックアウト
2. ビルド（Next.js or Docker）
3. テスト実行
4. Azure へデプロイ

### 完了条件
- すべてのワークフローファイルが作成されている
- main ブランチへのプッシュで自動デプロイが実行される
- デプロイが成功し、Azure 上でアプリケーションが動作する

### 参照
- [デプロイメント設計](../../arch/deployment.md) - セクション4

---

## タスク15: 統合テスト・E2Eテスト

### 概要
主要なユーザーフローのE2Eテストを実装します。

### テストシナリオ
1. **ログインフロー**
   - ログイン → ダッシュボード表示
2. **テナント管理フロー**
   - テナント作成 → 詳細表示 → 編集 → 削除
3. **ユーザー管理フロー**
   - ユーザー作成 → ロール割り当て → 詳細表示

### ツール
- Playwright または Cypress

### 完了条件
- E2Eテストスイートが実装されている
- すべてのテストが成功する
- CI/CD パイプラインでテストが自動実行される

---

## タスク16: ドキュメント整備

### 概要
プロジェクトの運用に必要なドキュメントを整備します。

### ドキュメント一覧
1. **README.md** (ルート)
   - プロジェクト概要
   - セットアップ手順
   - 起動方法
2. **docs/operation.md**
   - デプロイ手順
   - トラブルシューティング
   - バックアップ・リストア
3. **docs/api-usage.md**
   - API使用例
   - 認証方法
   - エラーハンドリング

### 完了条件
- すべてのドキュメントが作成されている
- 第三者が手順に従って環境構築できる
- 運用時の参考になる情報が記載されている

---

## 全タスク共通の注意事項

### 開発時の確認事項
- [ ] コードがリポジトリにコミットされている
- [ ] ビルドエラーがない
- [ ] Lintエラーがない
- [ ] 単体テストが成功する（該当する場合）
- [ ] ローカル環境で動作確認している

### レビュー観点
- セキュリティ: 認証・認可が適切に実装されているか
- パフォーマンス: N+1クエリなどの問題がないか
- エラーハンドリング: 適切なエラーメッセージが表示されるか
- コード品質: 可読性、保守性が高いか

### デプロイ前チェックリスト
- [ ] 環境変数が正しく設定されている
- [ ] シークレットが安全に管理されている
- [ ] HTTPS が有効になっている
- [ ] CORS 設定が適切である
- [ ] データベースに初期データが投入されている

---

## 参照ドキュメント

- [開発タスク一覧](./開発タスク.md)
- [アーキテクチャ概要](../../arch/overview.md)
- [API仕様](../../arch/api/api-specification.md)
- [データモデル](../../arch/data/data-model.md)
- [デプロイメント設計](../../arch/deployment.md)

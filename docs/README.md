# ドキュメントインデックス

このディレクトリには、複数サービス管理アプリケーションPoCに関するすべてのドキュメントが格納されています。

---

## 📂 ディレクトリ構成

```
docs/
├── README.md                    # このファイル（ドキュメントインデックス）
├── init.md                      # プロジェクト初期要件・概要
├── arch/                        # アーキテクチャ設計ドキュメント
│   ├── README.md                # アーキテクチャドキュメント目次
│   ├── overview.md              # アーキテクチャ概要
│   ├── deployment.md            # デプロイメント設計
│   ├── components/              # コンポーネント設計
│   │   └── README.md
│   ├── data/                    # データ設計
│   │   └── data-model.md
│   └── api/                     # API設計
│       └── api-specification.md
└── PoCアプリ/                   # その他のプロジェクト資料
```

---

## 📖 ドキュメント一覧

### 1. [プロジェクト概要](./init.md)

**内容**:
- サービスの概要
- 各サービスの役割
  - Frontend
  - テナント管理サービス
  - 認証認可サービス
  - 利用サービス設定サービス
- モックサービスについて
- 技術情報
- ソース構成
- 注意事項

**対象読者**: すべてのプロジェクト関係者

**こんな時に読む**:
- プロジェクトに初めて参加する時
- サービス全体の要件を確認したい時
- 各サービスの責務を確認したい時

---

### 2. [アーキテクチャドキュメント](./arch/README.md)

システムのアーキテクチャ設計に関するすべてのドキュメント。

#### 2.1 [アーキテクチャ概要](./arch/overview.md)

**内容**:
- システム全体の概要と目的
- アーキテクチャスタイル（マイクロサービス、BFF）
- システム構成図
- 技術スタック
- 主要コンポーネント
- データフロー
- 認証・認可モデル
- セキュリティ考慮事項

**対象読者**: すべての開発者、技術リード、プロジェクトマネージャー

**こんな時に読む**:
- システム全体像を把握したい時
- 技術選定の背景を知りたい時
- 新規参加者へのオンボーディング時

---

#### 2.2 [コンポーネント設計](./arch/components/README.md)

**内容**:
- Frontend (Next.js) の詳細設計
  - ディレクトリ構造
  - BFF API Routes
  - UIコンポーネント設計
  - 認証フロー
- 各バックエンドサービスの詳細設計
  - 認証認可サービス
  - テナント管理サービス
  - 利用サービス設定サービス
- モックサービスの実装方法
- コンポーネント間通信

**対象読者**: 開発者、テクニカルリード

**こんな時に読む**:
- 特定のサービスを実装する時
- サービス間の連携方法を確認したい時
- ディレクトリ構造を理解したい時

---

#### 2.3 [データ設計](./arch/data/data-model.md)

**内容**:
- Cosmos DB の構成
- データモデル定義
  - テナント管理データ
  - 認証認可データ
  - サービス設定データ
- コンテナ設計
- パーティションキー戦略
- データアクセスパターン
- クエリ最適化
- データマイグレーション

**対象読者**: 開発者、データエンジニア

**こんな時に読む**:
- データベーススキーマを確認したい時
- 新しいクエリを実装する時
- データモデルを変更する時

---

#### 2.4 [API設計仕様書](./arch/api/api-specification.md)

**内容**:
- 共通仕様（認証、エラーレスポンス、ページネーション）
- 認証認可サービス API
- テナント管理サービス API
- 利用サービス設定サービス API
- BFF API (Next.js)
- モックサービス API

**対象読者**: 開発者、QAエンジニア、フロントエンド/バックエンド開発者

**こんな時に読む**:
- APIエンドポイントを実装する時
- フロントエンドとバックエンドを統合する時
- APIテストを作成する時

---

#### 2.5 [デプロイメント設計](./arch/deployment.md)

**内容**:
- Azure インフラストラクチャ概要
- Azure リソース構成
  - App Service (Frontend)
  - Container Apps (Backend)
  - Cosmos DB
  - Application Insights
- ネットワーク設計
- CI/CD パイプライン（GitHub Actions）
- Bicep IaC テンプレート
- 環境変数管理
- コスト見積もり

**対象読者**: DevOpsエンジニア、インフラエンジニア、開発者

**こんな時に読む**:
- インフラをセットアップする時
- CI/CDパイプラインを設定する時
- デプロイ方法を確認したい時

---

## 🚀 クイックスタートガイド

### 新規参加者向け（初日）

1. **[プロジェクト概要](./init.md)** を読む（15分）
   - サービス全体を理解
2. **[アーキテクチャ概要](./arch/overview.md)** を読む（30分）
   - 技術スタックとシステム構成を把握
3. **[コンポーネント設計](./arch/components/README.md)** の担当領域を読む（20分）
4. 開発環境をセットアップ（[開発環境について](../.github/instructions/general.instructions.md)参照）

---

### フロントエンド開発者向け

**読むべきドキュメント**:
1. [コンポーネント設計 - Frontend セクション](./arch/components/README.md#1-frontend-nextjs)
2. [API設計仕様書 - BFF API](./arch/api/api-specification.md#5-bff-api-nextjs)
3. [データ設計](./arch/data/data-model.md)（データ構造理解のため）

**開発フロー**:
- APIエンドポイントは BFF 経由で実装
- モックサービスは BFF 内に実装
- JWTの検証はミドルウェアで実施

---

### バックエンド開発者向け

**読むべきドキュメント**:
1. [コンポーネント設計 - 担当サービス](./arch/components/README.md)
2. [データ設計](./arch/data/data-model.md)
3. [API設計仕様書 - 担当サービスAPI](./arch/api/api-specification.md)

**開発フロー**:
- FastAPI でエンドポイント実装
- Cosmos DB へのアクセスは Repository パターン
- JWT検証は依存性注入で実装

---

### インフラ/DevOps担当者向け

**読むべきドキュメント**:
1. [デプロイメント設計](./arch/deployment.md)
2. [アーキテクチャ概要](./arch/overview.md)（全体理解のため）

**セットアップフロー**:
1. Bicep テンプレートでリソースをデプロイ
2. GitHub Actions でCI/CDパイプラインを設定
3. 環境変数を設定

---

## 🔍 ドキュメント検索ガイド

### こんな時はこのドキュメントを読む

| やりたいこと | ドキュメント |
|------------|-------------|
| システム全体を理解したい | [アーキテクチャ概要](./arch/overview.md) |
| サービスの役割を確認したい | [プロジェクト概要](./init.md) |
| 新しいAPIを実装したい | [API設計仕様書](./arch/api/api-specification.md) |
| データベーススキーマを確認したい | [データ設計](./arch/data/data-model.md) |
| コンポーネントの実装方法を知りたい | [コンポーネント設計](./arch/components/README.md) |
| デプロイ方法を知りたい | [デプロイメント設計](./arch/deployment.md) |
| 認証の仕組みを理解したい | [アーキテクチャ概要 - 認証認可](./arch/overview.md#7-認証認可モデル) |
| エラーハンドリング方法を確認したい | [API設計仕様書 - エラーレスポンス](./arch/api/api-specification.md#14-エラーレスポンス) |
| Cosmos DBのクエリ方法を知りたい | [データ設計 - データアクセスパターン](./arch/data/data-model.md#5-データアクセスパターン) |
| CI/CDパイプラインを設定したい | [デプロイメント設計 - CI/CD](./arch/deployment.md#4-cicd-パイプライン) |

---

## 📝 ドキュメント更新ガイドライン

### 更新が必要な場合

以下の変更を行う際は、該当ドキュメントの更新が必要です：

- **新しいAPIエンドポイント追加** → [API設計仕様書](./arch/api/api-specification.md)
- **データモデル変更** → [データ設計](./arch/data/data-model.md)
- **新しいサービス追加** → [コンポーネント設計](./arch/components/README.md)、[アーキテクチャ概要](./arch/overview.md)
- **インフラ構成変更** → [デプロイメント設計](./arch/deployment.md)
- **認証・認可の変更** → [アーキテクチャ概要](./arch/overview.md)

### 更新手順

1. 該当ドキュメントを編集
2. ドキュメント末尾の「変更履歴」セクションを更新
3. プルリクエストに `documentation` ラベルを付与
4. レビュー後にマージ

---

## 🎯 品質基準

ドキュメントは以下の基準を満たすよう作成・管理されています：

- **明確性**: 技術用語は用語集で定義
- **完全性**: 必要な情報がすべて記載
- **最新性**: コードと同期して更新
- **構造化**: Markdown形式で階層化
- **視覚化**: Mermaid図を活用

---

## 🔗 関連リンク

- [GitHub リポジトリ](https://github.com/your-org/ws-demo-poly-integration)
- [開発環境について](../.github/instructions/general.instructions.md)
- [エージェント利用ガイド](../.github/instructions/agents.instructions.md)

---

## 📞 サポート

- **技術的な質問**: GitHub Issues
- **ドキュメント改善提案**: GitHub Issues（`documentation` ラベル）
- **バグ報告**: GitHub Issues（`bug` ラベル）

---

## 変更履歴

| バージョン | 日付 | 変更内容 | 作成者 |
|-----------|------|---------|-------|
| 1.0.0 | 2024 | 初版作成 | Architecture Agent |

# ==============================================================================
# STAGING ENVIRONMENT CONFIGURATION
# ==============================================================================
# This file serves as a reference for staging environment variables
# In Azure App Service, these should be configured in Application Settings

NODE_ENV=staging

# ==============================================================================
# COSMOSDB - Azure Staging Instance
# ==============================================================================
# Configure these in Azure App Service Application Settings
# COSMOSDB_ENDPOINT=https://your-staging-cosmosdb-account.documents.azure.com:443/
# COSMOSDB_KEY=<your-staging-cosmosdb-primary-key>
COSMOSDB_DATABASE=saas-management-staging
COSMOSDB_MAX_RETRY_ATTEMPTS=3
COSMOSDB_RETRY_INTERVAL_MS=1000

# ==============================================================================
# JWT - Use Azure Key Vault or App Service Configuration
# ==============================================================================
# IMPORTANT: Generate a strong secret using: openssl rand -base64 32
# JWT_SECRET=<retrieve-from-azure-key-vault-or-app-settings>
JWT_ALGORITHM=HS256
# JWT token expiry in seconds (43200 = 12 hours)
JWT_EXPIRES_IN=43200
# Refresh token expiry in seconds (604800 = 7 days)
JWT_REFRESH_EXPIRES_IN=604800
# JWT issuer and audience for token validation
JWT_ISSUER=saas-auth-service
JWT_AUDIENCE=saas-app

# ==============================================================================
# SERVICE URLS - Azure App Service URLs
# ==============================================================================
# FRONTEND_URL=https://your-frontend-staging.azurewebsites.net
# AUTH_SERVICE_URL=https://your-auth-service-staging.azurewebsites.net
# USER_MANAGEMENT_SERVICE_URL=https://your-user-management-staging.azurewebsites.net
# SERVICE_SETTINGS_SERVICE_URL=https://your-service-settings-staging.azurewebsites.net

FRONTEND_PORT=8080
AUTH_SERVICE_PORT=8080
USER_MANAGEMENT_SERVICE_PORT=8080
SERVICE_SETTINGS_SERVICE_PORT=8080

# ==============================================================================
# FEATURE FLAGS - Staging (Test new features before production)
# ==============================================================================
FEATURE_USER_CREATE=enabled
FEATURE_USER_EDIT=enabled
FEATURE_USER_DELETE=enabled
FEATURE_USER_ROLE_ASSIGN=enabled

FEATURE_SERVICE_CREATE=enabled
FEATURE_SERVICE_EDIT=enabled
FEATURE_SERVICE_DELETE=enabled

FEATURE_PASSWORD_RESET=enabled
FEATURE_EMAIL_VERIFICATION=enabled
FEATURE_TWO_FACTOR_AUTH=enabled

FEATURE_ANALYTICS=enabled
FEATURE_AUDIT_LOGGING=enabled
FEATURE_RATE_LIMITING=enabled

# ==============================================================================
# LOGGING - Info level for staging
# ==============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=

# ==============================================================================
# CORS - Specific staging origins
# ==============================================================================
# CORS_ORIGINS=https://your-frontend-staging.azurewebsites.net

# ==============================================================================
# RATE LIMITING - Moderate limits for staging
# ==============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=200

# ==============================================================================
# AZURE APP SERVICE SETTINGS
# ==============================================================================
# Configure Application Insights for monitoring
# APPINSIGHTS_INSTRUMENTATIONKEY=<your-staging-appinsights-key>

# Azure Storage for file uploads (if needed)
# AZURE_STORAGE_CONNECTION_STRING=<your-staging-storage-connection-string>

# ==============================================================================
# TENANT
# ==============================================================================
DEFAULT_TENANT_ID=staging-tenant

# ==============================================================================
# SECURITY - Production-level security
# ==============================================================================
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL_CHARS=true

SESSION_TIMEOUT_MINUTES=30
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=15

# ==============================================================================
# DEVELOPMENT TOOLS - Limited in staging
# ==============================================================================
ENABLE_API_DOCS=true
ENABLE_DETAILED_ERRORS=false
ENABLE_REQUEST_LOGGING=true

# ==============================================================================
# IMPORTANT NOTES FOR STAGING
# ==============================================================================
# 1. Use Azure Key Vault for sensitive values (JWT_SECRET, COSMOSDB_KEY)
# 2. Configure all secrets in Azure App Service Application Settings
# 3. Enable Application Insights for monitoring
# 4. Use staging to test new features before production
# 5. Keep this file as a reference; actual values go in Azure

# ==============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ==============================================================================
# This file serves as a reference for production environment variables
# CRITICAL: All values MUST be configured in Azure App Service Application Settings
# NEVER store production secrets in files

NODE_ENV=production

# ==============================================================================
# COSMOSDB - Azure Production Instance
# ==============================================================================
# CRITICAL: Configure these in Azure App Service Application Settings
# Use Azure Key Vault for enhanced security
# COSMOSDB_ENDPOINT=https://your-production-cosmosdb-account.documents.azure.com:443/
# COSMOSDB_KEY=<retrieve-from-azure-key-vault>
COSMOSDB_DATABASE=saas-management-prod
COSMOSDB_MAX_RETRY_ATTEMPTS=5
COSMOSDB_RETRY_INTERVAL_MS=2000

# ==============================================================================
# JWT - MUST use Azure Key Vault
# ==============================================================================
# CRITICAL: Use Azure Key Vault to store and retrieve JWT_SECRET
# Generate using: openssl rand -base64 64
# JWT_SECRET=<retrieve-from-azure-key-vault>
JWT_EXPIRES_IN=8h
JWT_REFRESH_EXPIRES_IN=7d

# ==============================================================================
# SERVICE URLS - Azure App Service Production URLs
# ==============================================================================
# FRONTEND_URL=https://your-app-name.azurewebsites.net
# AUTH_SERVICE_URL=https://your-auth-service-prod.azurewebsites.net
# USER_MANAGEMENT_SERVICE_URL=https://your-user-management-prod.azurewebsites.net
# SERVICE_SETTINGS_SERVICE_URL=https://your-service-settings-prod.azurewebsites.net

FRONTEND_PORT=8080
AUTH_SERVICE_PORT=8080
USER_MANAGEMENT_SERVICE_PORT=8080
SERVICE_SETTINGS_SERVICE_PORT=8080

# ==============================================================================
# FEATURE FLAGS - Production (Conservative approach)
# ==============================================================================
# Enable features gradually in production
FEATURE_USER_CREATE=enabled
FEATURE_USER_EDIT=enabled
FEATURE_USER_DELETE=enabled
FEATURE_USER_ROLE_ASSIGN=enabled

FEATURE_SERVICE_CREATE=enabled
FEATURE_SERVICE_EDIT=enabled
FEATURE_SERVICE_DELETE=enabled

FEATURE_PASSWORD_RESET=enabled
FEATURE_EMAIL_VERIFICATION=enabled
FEATURE_TWO_FACTOR_AUTH=enabled

FEATURE_ANALYTICS=enabled
FEATURE_AUDIT_LOGGING=enabled
FEATURE_RATE_LIMITING=enabled

# ==============================================================================
# LOGGING - Error and warn only in production
# ==============================================================================
LOG_LEVEL=warn
LOG_FORMAT=json
LOG_FILE_PATH=

# ==============================================================================
# CORS - Strict production origins only
# ==============================================================================
# CORS_ORIGINS=https://your-app-name.azurewebsites.net

# ==============================================================================
# RATE LIMITING - Strict limits for production
# ==============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ==============================================================================
# AZURE APP SERVICE SETTINGS - Production
# ==============================================================================
# CRITICAL: Configure Application Insights for production monitoring
# APPINSIGHTS_INSTRUMENTATIONKEY=<your-production-appinsights-key>

# Azure Storage for file uploads (if needed)
# AZURE_STORAGE_CONNECTION_STRING=<retrieve-from-azure-key-vault>

# ==============================================================================
# TENANT
# ==============================================================================
DEFAULT_TENANT_ID=production-tenant

# ==============================================================================
# SECURITY - Maximum security for production
# ==============================================================================
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL_CHARS=true

SESSION_TIMEOUT_MINUTES=30
MAX_LOGIN_ATTEMPTS=3
LOCKOUT_DURATION_MINUTES=30

# ==============================================================================
# DEVELOPMENT TOOLS - Minimal or disabled in production
# ==============================================================================
ENABLE_API_DOCS=false
ENABLE_DETAILED_ERRORS=false
ENABLE_REQUEST_LOGGING=false

# ==============================================================================
# CRITICAL SECURITY NOTES FOR PRODUCTION
# ==============================================================================
# 1. NEVER store production secrets in files or version control
# 2. Use Azure Key Vault for all sensitive values:
#    - JWT_SECRET
#    - COSMOSDB_KEY
#    - AZURE_STORAGE_CONNECTION_STRING
# 3. Configure all values in Azure App Service Application Settings
# 4. Enable Application Insights for monitoring and alerting
# 5. Use HTTPS only - enforce SSL/TLS
# 6. Regularly rotate secrets and keys
# 7. Enable Azure DDoS Protection
# 8. Configure Azure Front Door or Application Gateway for WAF
# 9. Enable diagnostic logs and send to Log Analytics
# 10. Set up Azure Monitor alerts for critical errors

# ==============================================================================
# AZURE KEY VAULT INTEGRATION
# ==============================================================================
# Reference secrets from Key Vault in App Service:
# @Microsoft.KeyVault(SecretUri=https://your-keyvault.vault.azure.net/secrets/jwt-secret/)
# @Microsoft.KeyVault(SecretUri=https://your-keyvault.vault.azure.net/secrets/cosmosdb-key/)

# ==============================================================================
# COMPLIANCE AND AUDIT
# ==============================================================================
# Ensure configuration meets:
# - GDPR requirements for data protection
# - SOC 2 compliance standards
# - Industry-specific regulations (if applicable)
